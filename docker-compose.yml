version: "3"

services:
  balancer:
    build: docker/nginx
    ports:
      - ${APP_PORT}:80
    volumes:
      - ./:/var/www/application.local
    networks:
      - network

  nginx1:
    build: docker/nginx
    volumes:
      - ./:/var/www/application.local
    networks:
      - network

  nginx2:
    build: docker/nginx
    volumes:
      - ./:/var/www/application.local
    networks:
      - network

  php-fpm1:
    build: docker/php-fpm
    volumes:
      - ./:/var/www/application.local
    networks:
      - network

  php-fpm2:
    build: docker/php-fpm
    volumes:
      - ./:/var/www/application.local
    networks:
      - network

  memcached:
    image: memcached:latest
    networks:
      - network

networks:
  network:
    driver: bridge