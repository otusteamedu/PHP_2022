## Инструкция по развертыванию и использованию приложения

### Настройка уведомлений в Telegram

В файле application/.env установить id вашего чата TELEGRAM_CHAT_ID=231454322.  
Узнать идентификатор можно с помощью бота @ShowJsonBot.
Далее необходимо запустить бот https://t.me/rabbit_mq_test_bot  
Также нужно написать боту одно сообщение (сделать это нужно один раз, связано с политикой конфиденциальности Телеграм)

### Сборка и запуск приложения

```
$ docker-compose build
$ docker-compose up -d
```

### Старт worker-а

Необходимо зайти в контейнер с приложением
```
$ docker-compose exec app bash
```
Запустить worker, который будет считывать сообщения из очереди
```
$ php artisan worker:run
```

### Выполнение запроса на генерацию отчета

Для отправки запроса на генерацию отчета в очередь необходимо выполнить http-запрос (файл requests.http):

```http request
POST http://application.local/report/generate
Content-Type: application/json

{
  "dateFrom": "2022-06-09",
  "dateTo": "2022-06-17"
}
```

### Описание работы приложения

1. После отправки запроса, сообщение попадет в очередь.
2. В ответе придет уведомление, что запрос отправлен на обработку.
3. Worker будет читать сообщения и выводить в консоль отчеты.
4. При чтении каждого сообщения будет отправляться уведомление в Телеграм с текстом отчета.