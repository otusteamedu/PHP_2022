CREATE TABLE hall (
    id SERIAL PRIMARY KEY,
    name VARCHAR(50)
);

CREATE TABLE film (
    id SERIAL PRIMARY KEY,
    name VARCHAR(200),
    timing TIME
);

CREATE TABLE place (
    id SERIAL PRIMARY KEY,
    place_number INT,
    row_number INT,
    hall_id INT REFERENCES hall (id)
);

CREATE TABLE film_session (
    id SERIAL PRIMARY KEY,
    hall_id INT REFERENCES hall (id),
    film_id INT REFERENCES film (id),
    start_time TIMESTAMP,
    end_time TIMESTAMP
);

CREATE TABLE ticket (
    id SERIAL PRIMARY KEY,
    price MONEY,
    film_session_id INT REFERENCES film_session (id),
    place_id INT REFERENCES place (id)
);

INSERT INTO hall (name) VALUES ('Зал 1'), ('Зал 2'), ('Зал 3'), ('Зал 4'), ('Зал 5');

INSERT INTO film (name, timing)
VALUES
       ('Гладиатор', '02:05'),
       ('Титаник', '03:15'),
       ('Храброе сердце', '02:10'),
       ('Аватар', '02:35'),
       ('Начало', '02:15'),
       ('Матрица', '01:55');

DO $$
    BEGIN
        FOR i IN 1..5 LOOP
                FOR j IN 1..5 LOOP
                        FOR k IN 1..10 LOOP
                                INSERT INTO place (place_number, row_number, hall_id) values(k, j, i);
                            END LOOP;
                    END LOOP;
            END LOOP;
    END;
$$;

INSERT INTO film_session (hall_id, film_id, start_time, end_time)
VALUES
    (1, 1, '2022-03-02 10:00', '2022-03-02 12:05'),
    (1, 2, '2022-03-02 12:30', '2022-03-02 16:30'),
    (1, 3, '2022-03-02 16:50', '2022-03-02 19:00'),
    (1, 4, '2022-03-02 19:20', '2022-03-02 21:55'),

    (2, 6, '2022-03-02 09:00', '2022-03-02 10:55'),
    (2, 5, '2022-03-02 11:10', '2022-03-02 12:05'),
    (2, 4, '2022-03-02 12:20', '2022-03-02 14:55'),
    (2, 3, '2022-03-02 15:10', '2022-03-02 17:20'),
    (2, 2, '2022-03-02 17:40', '2022-03-02 20:55'),

    (3, 1, '2022-03-02 09:30', '2022-03-02 11:35'),
    (3, 2, '2022-03-02 11:50', '2022-03-02 15:05'),
    (3, 5, '2022-03-02 15:20', '2022-03-02 17:35'),
    (3, 6, '2022-03-02 17:50', '2022-03-02 19:45'),
    (3, 1, '2022-03-02 20:00', '2022-03-02 22:05'),

    (4, 2, '2022-03-02 10:00', '2022-03-02 13:15'),
    (4, 4, '2022-03-02 13:30', '2022-03-02 16:05'),
    (4, 1, '2022-03-02 16:15', '2022-03-02 18:20'),
    (4, 6, '2022-03-02 18:30', '2022-03-02 20:25'),

    (5, 5, '2022-03-02 09:30', '2022-03-02 11:45'),
    (5, 4, '2022-03-02 12:00', '2022-03-02 14:35'),
    (5, 3, '2022-03-02 14:40', '2022-03-02 15:50'),
    (5, 6, '2022-03-02 16:00', '2022-03-02 17:55'),
    (5, 3, '2022-03-02 18:10', '2022-03-02 20:20');

INSERT INTO ticket (price, film_session_id, place_id)
VALUES
    (150, 1, 5), (150, 1, 22), (150, 1, 17),
    (300, 2, 23), (300, 2, 43),
    (150, 3, 21), (150, 3, 33), (250, 3, 13), (250, 3, 4), (250, 3, 19),
    (250, 4, 43), (250, 4, 49),
    (300, 5, 87), (300, 5, 94),
    (400, 6, 67), (400, 6, 87), (400, 6, 56),
    (200, 7, 71), (200, 7, 58), (200, 7, 82),
    (200, 8, 66), (200, 8, 78), (200, 8, 95), (150, 8, 100), (150, 8, 74),
    (300, 9, 67), (300, 9, 91), (300, 9, 75),
    (200, 10, 101), (200, 10, 134), (200, 10, 112),
    (250, 11, 141), (250, 11, 132), (250, 11, 104),
    (200, 12, 109), (200, 12, 111),
    (300, 13, 145), (300, 13, 139),
    (300, 14, 119), (300, 14, 141),
    (150, 15, 151), (150, 15, 176), (150, 15, 199),
    (200, 16, 171), (200, 16, 186),
    (250, 17, 156), (250, 17, 197),
    (150, 18, 177), (150, 18, 188), (150, 18, 199),
    (250, 19, 202), (250, 19, 245), (250, 19, 234), (200, 19, 204),
    (150, 20, 210), (150, 20, 211),
    (150, 21, 244), (150, 21, 245),
    (150, 22, 215), (150, 22, 247),
    (250, 23, 201), (250, 23, 202), (250, 23, 203);