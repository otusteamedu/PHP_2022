EXPLAIN SELECT * FROM tickets WHERE cost < 500;

-- 10 000 строк
-- +-----------------------------------------------------------+
-- |QUERY PLAN                                                 |
-- +-----------------------------------------------------------+
-- |Seq Scan on tickets  (cost=0.00..168.35 rows=2516 width=52)|
-- |  Filter: (cost < '500'::numeric)                          |
-- +-----------------------------------------------------------+

-- 10 000 000 строк
-- +-------------------------------------------------------------------------------+
-- |QUERY PLAN                                                                     |
-- +-------------------------------------------------------------------------------+
-- |Gather  (cost=1000.00..177980.33 rows=510530 width=31)                         |
-- |  Workers Planned: 2                                                           |
-- |  ->  Parallel Seq Scan on tickets  (cost=0.00..125927.33 rows=212721 width=31)|
-- |        Filter: (cost < '500'::numeric)                                        |
-- +-------------------------------------------------------------------------------+

-- Оптимизация
CREATE INDEX tickets_cost ON tickets (cost);

-- 10 000 000 строк после оптимизации
-- +----------------------------------------------------------------------------------+
-- |QUERY PLAN                                                                        |
-- +----------------------------------------------------------------------------------+
-- |Bitmap Heap Scan on tickets  (cost=11765.95..157939.38 rows=508066 width=31)      |
-- |  Recheck Cond: (cost < '500'::numeric)                                           |
-- |  ->  Bitmap Index Scan on tickets_cost  (cost=0.00..11638.93 rows=508066 width=0)|
-- |        Index Cond: (cost < '500'::numeric)                                       |
-- +----------------------------------------------------------------------------------+
