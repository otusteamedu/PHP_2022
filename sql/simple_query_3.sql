EXPLAIN SELECT * FROM sessions WHERE hall_id = 10;

-- 10 000 строк
-- +------------------------------------------------------------+
-- |QUERY PLAN                                                  |
-- +------------------------------------------------------------+
-- |Seq Scan on sessions  (cost=0.00..209.00 rows=1007 width=32)|
-- |  Filter: (hall_id = 10)                                    |
-- +------------------------------------------------------------+

-- 10 000 000 строк
-- +-------------------------------------------------------------------------------+
-- |QUERY PLAN                                                                     |
-- +-------------------------------------------------------------------------------+
-- |Seq Scan on sessions  (cost=0.00..208542.50 rows=991661 width=32)              |
-- |  Filter: (hall_id = 10)                                                       |
-- +-------------------------------------------------------------------------------+

-- Оптимизация
CREATE INDEX sessions_hall_index ON sessions(hall_id);

-- 10 000 000 строк после оптимизации
-- +------------------------------------------------------------------------------------+
-- |QUERY PLAN                                                                          |
-- +------------------------------------------------------------------------------------+
-- |Bitmap Heap Scan on sessions  (cost=11326.34..175710.68 rows=1017020 width=32)      |
-- |  Recheck Cond: (hall_id = 10)                                                      |
-- |  ->  Bitmap Index Scan on sessions_hall  (cost=0.00..11072.08 rows=1017020 width=0)|
-- |        Index Cond: (hall_id = 10)                                                  |
-- |JIT:                                                                                |
-- |  Functions: 2                                                                      |
-- |  Options: Inlining false, Optimization false, Expressions true, Deforming true     |
-- +------------------------------------------------------------------------------------+
